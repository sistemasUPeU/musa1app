<div class="row">
  <div class="col-xl-12">
    <h1 class="page-header">
      Producto
    </h1>
    <!-- Button trigger modal -->
    <div class="container row">
      <div class="col-8">
        <button (click)="fillSelectCategoria(), fillSelectMarca() , fillSelectUnidadMedida()" type="button" class="btn btn-primary" data-toggle="modal"
          data-target="#addproductomodal">
          Agregar Producto
        </button>
      </div>
      <div class="col-4">
        <form class="">
          <input clickOutside (clickOutside)="toggleDropDownOff()" (click)="toogleDropDown()" (keyup)="searchProducto()" [(ngModel)]="inputSearch" name="inputSearch" class="form-control mr-sm-2" type="search" placeholder="Buscar Producto" aria-label="Search">
        </form>
        <div *ngIf=></div>
      </div>
    </div>

    <!--bloqurmodal-->
    <div class="modal fade" id="addproductomodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" *ngFor="let prod of loadProductoData; let $last = last" [isLast]='$last' (ngInit)="getCategoria(prod.id_categoria)" (ngInit)="getMarca(prod.id_marca)" (ngInit)="getUnidad(prod.id_unidad_medida)">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Nuevo Producto</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="nom" class="col-form-label">Nombre Producto:</label>
                <input [(ngModel)]="producto.nombre_producto" name="nombre_producto" type="text" class="form-control">

              </div>

              <div class="form-group">
                <label for="desc" class="col-form-label">Descripción:</label>
                <input [(ngModel)]= "producto.desc_producto" name="desc_producto" type="text" class="form-control">
              </div>
              <div class="form-group">
                <label for="categoria" class="col-form-label">Categoria:</label>
                <select class="form-control" (change)="selectCategoria($event)">
                  <option value="0"> Seleccionar Categoría.. </option>
                  <option *ngFor="let categoria of listCategoria" value={{categoria.ID_CATEGORIA}}> {{categoria.NOMBRE_CATEGORIA}}</option>>
                </select>
              </div>
              <div class="form-group">
                <label for="unidadmedida" class="col-form-label">Unidad de Medida:</label>
                <select class="form-control" (change)="selectUnidadMedida($event)">
                  <option value="0"> Seleccionar UnidadMedida..</option>
                  <option *ngFor="let unidadmedida of listUnidadMedida" value={{unidadmedida.id_unidad_medida}}>{{unidadmedida.unidad_medida}} </option> 
                </select>
              </div>
              <div class="form-group">
                <label for="cod" class="col-form-label">Código:</label>
                <input [ngModel]="producto.codigo" name="codigo" type="text" class="form-control">
              </div>
              <div class="form-group">
                <label for="marca" class="col-form-label">Marca:</label>
                <select class="form-control" (change)="selectMarca($event)">
                  <option value="0"> Seleccionar Marca </option>
                  <option *ngFor="let marca of listMarca" value="{{marca.id_marca}}">{{marca.nombre_marca}}</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            <button type="button" (click)="Guardar()" class="btn btn-primary" data-dismiss="modal">Guardar</button>
          </div>
        </div>
      </div>
    </div>
    <!--bloqurmodal modificar-->
    <div class="modal fade" id="editproductomodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" *ngFor="let prod of loadProductoData">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Nuevo Producto</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="nom" class="col-form-label">Nombre Producto:</label>
                <input [(ngModel)]="prod.nombre_producto " name="nombre_producto" type="text" class="form-control">
              </div>
              <div class="form-group">
                <label for="desc" class="col-form-label">Descripción:</label>
                <input name="desc_producto" type="text" class="form-control">
              </div>
              <div class="form-group">
                <label for="categoria" class="col-form-label">Categoria:</label>
                <select class="form-control" (change)="selectCategoriaUpdate($event)">
                    <option *ngFor="let categoria of listCategoria" value={{categoria.id_categoria}}>
                      {{categoria.NOMBRE_CATEGORIA}} </option>
                </select>
              </div>
              <div class="form-group">
                <label for="unidadmedida" class="col-form-label">Unidad de Medida:</label>
                <select class="form-control" (change)="selectUnidadMedidaUpdate($event)">
                  <option *ngFor="let unidadmedida of listUnidadMedida" value={{unidadmedida.id_unidad_medida}}>
                    {{unidadmedida.unidad_medida}}</option>
                </select>
              </div>
              <div class="form-group">
                <label for="cod" class="col-form-label">Código:</label>
                <input [(ngModel)]="prod.codigo" name="codigo" type="text" class="form-control">
              </div>
              <div class="form-group">
                <label for="marca" class="col-form-label">Marca:</label>
                <select class="form-control" (change)="selectMarcaUpdate($event)">
                  <option *ngFor="let marca of listMarca" value="{{marca.id_marca}}">
                    {{marca.nombre_marca}} </option>
                </select>
              </div>

            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            <button type="button" (click)="Actualizar(prod)" class="btn btn-primary" data-dismiss="modal">Guardar</button>
          </div>
        </div>
      </div>
    </div>
    <!----fin de modificar-->
    <!----tabla-->
    <br><br>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripcion</th>
          <th>Categoria</th>
          <th>Unidad Medida</th>
          <th>Código</th>
          <th>Marca</th>
          <th colspan="2">Opcion</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of listProducto">
          <td>{{}producto.nombre_producto}</td>
          <td>{{producto.descripcion}}</td>
          <td>{{producto.id_categoria}}</td>
          <td>{{producto.id_unidad_medida}}</td>
          <td>{{producto.codigo}}</td>
          <td>{{producto.id_marca}}</td>
          <td><button class="btn btn-warning fa fa-pencil" (click)="fillSelectCategoria(), fillSelectMarca() , fillSelectUnidadMedida()" (click)="loadProducto(producto)"
              data-toggle="modal" data-target="#editproductomodal"></button></td>
          <td><button class="btn btn-danger fa fa-trash" (click)="Eliminar(producto)"></button></td>
        </tr>
      </tbody>
      